<!DOCTYPE html>

<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.w3.org/1999/xhtml">


<head th:replace="fragments/header :: header">

</head>

<body id="page-top">

<nav th:replace="fragments/topbar :: topbar"></nav>

<div id="wrapper">

    <ul class="sidebar navbar-nav" th:include="fragments/sidebar :: sidebar"></ul>

    <div id="content-wrapper">


        <h1>User account details</h1>


        <div sec:authorize="isAnonymous()">
            <p> Section available for logges users</p>
            <a th:href="@{/home}">Home</a>
        </div>

        <div sec:authorize="isAuthenticated()">


            <p sec:authorize="isAuthenticated()">
            <p>Logged as <span sec:authentication="name"/></p>
            </p>

            <table>
                <tr>
                    <td>
                        <a th:href="@{/home}">Home</a>
                    </td>
            </table>


            <ul>
                <li th:text="|Currently in you wallet is: ${wallet.balance} PLN|"/>
                <li th:text="|Your wallet is linked to bank account: ${wallet.bankAccount}|"/>
            </ul>


            <table>
                <tr>
                    <td>

                        <form th:action="@{/chargeaccount}" th:object="${wallet}" method="get">
                            <input type="submit" value="Deposit"/>
                        </form>
                    </td>

                    <td>
                        <form th:action="@{/withdraw}" th:object="${wallet}" method="get">
                            <input type="submit" value="Withdraw money"/>
                        </form>
                    </td>
                </tr>

            </table>

            <h3>Operations history:</h3>
            <p>TODO:</p>
            <p> add a class operation (type: withdraw/recharge) with relation to wallet </p>

        </div>

    </div>

    <div th:include="fragments/footer :: footer"></div>
</div>
</body>
</html>