<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.w3.org/1999/xhtml">

<head th:replace="fragments/header :: header">

</head>
<body id="page-top">

<nav th:replace="fragments/topbar :: topbar"></nav>

<div id="wrapper">

    <ul class="sidebar navbar-nav" th:include="fragments/sidebar :: sidebar"></ul>

    <div id="content-wrapper"  th:fragment="active">


        <h2> Upcoming events </h2>


        <div class="table-responsive" th:if="${activeFixtures} ==null"> No betting events available at the moment</div>

        <!--/*@thymesVar id="activeFixtures" type="pl.coderslab.sportsbet2.model.Fixture"*/-->
        <div class="table-responsive" th:if="${activeFixtures}!=null" th:each="fixture : ${activeFixtures}">


            <ul class="list-group" th:text="|Matchday ${fixture.getKey()}|"></ul>

            <table class="table table-sm table-hover"  >
                <thead>
                <tr>

                    <th> Date</th>
                    <th> Teams</th>
                    <th> FT Result</th>
                    <th> HT Result</th>
                    <th> 1</th>
                    <th> x</th>
                    <th> 2</th>
                    <th> less2.5</th>
                    <th> more2.5</th>
                    <td></td>
                </tr>
                </thead>

                <tbody>
                <tr th:each="event : ${fixture.getValue()}">
                    <td th:text="${event.getDate()}"></td>
                    <td th:text="|${event.getHomeTeam().getName()} v ${event.getAwayTeam().getName()}|"></td>

                    <!--<td th:text="|${event.getFTHG()} : ${event.FTAG}|"></td>-->

                    <td th:switch="${event.FTHG}">
                        <span th:case="null" th:text="|-- : --|"></span>
                        <span th:case="${event.getFTHG()}" th:text="|${event.getFTHG()} : ${event.FTAG}|"></span>
                    </td>

                    <!--<td th:text="|(${event.getHTHG()} : ${event.HTAG})|"></td>-->
                    <td th:switch="${event.HTHG}">
                        <span th:case="null" th:text="|-- : --|"></span>
                        <span th:case="${event.getHTHG()}" th:text="|(${event.getHTHG()} : ${event.HTAG})|"></span>
                    </td>

                    <form th:action="@{/bet-new}" th:object="${singlBet}" method="post">

                        <td>
                            <input type="hidden" name="event" th:value="${event.id}"/>
                            <input type="hidden" name="betPrice" th:value="${event.homeWinOdd}"/>
                            <input type="hidden" name="placedBet" th:value="H"/>
                            <input type="submit" th:value="${event.homeWinOdd}"/>

                        </td>
                    </form>


                    <form th:action="@{/bet-new}" th:object="${bet}" method="post">
                        <td>
                            <input type="hidden" name="event" th:value="${event.id}"/>
                            <input type="hidden" name="betPrice" th:value="${event.drawOdd}"/>
                            <input type="hidden" name="placedBet" th:value="D"/>
                            <input type="submit" th:value="${event.drawOdd}"/>
                        </td>
                    </form>

                    <form th:action="@{/bet-new}" th:object="${bet}" method="post">
                        <td>
                            <input type="hidden" name="event" th:value="${event.id}"/>
                            <input type="hidden" name="betPrice" th:value="${event.awayWinOdd}"/>
                            <input type="hidden" name="placedBet" th:value="A"/>
                            <input type="submit" th:value="${event.awayWinOdd}"/>
                        </td>
                    </form>

                    <form th:action="@{/bet-new}" th:object="${bet}" method="post">
                        <td>
                            <input type="hidden" name="event" th:value="${event.id}"/>
                            <input type="hidden" name="betPrice" th:value="${event.goal_less_2_5}"/>
                            <input type="hidden" name="placedBet" th:value="LT2_5"/>
                            <input type="submit" th:value="${event.goal_less_2_5}" />
                        </td>
                    </form>

                    <form th:action="@{/bet-new}" th:object="${bet}" method="post">
                        <td>
                            <input type="hidden" name="event" th:value="${event.id}"/>
                            <input type="hidden" name="betPrice" th:value="${event.goal_more_2_5}"/>
                            <input type="hidden" name="placedBet" th:value="GT2_5"/>
                            <input type="submit" th:value="${event.goal_more_2_5}"/>
                        </td>
                    </form>


                    <td sec:authorize="hasRole('ROLE_ADMIN')">
                        <form th:action="@{/fixture-edit/{id} (id=${event.getId()})}" th:object="${fixture}"
                              method="get">
                            <input type="submit" value="Edit"/>
                        </form>
                    </td>


                    <td th:if="${event.getMatchStatus().equals('active')}">
                        <form th:action="@{/fixture-stats/{id} (id=${event.id})}" method="get">
                            <input type="submit" value="Show stats"/>
                        </form>
                    </td>

                </tr>

                </tbody>

            </table>
        </div>

    </div>
</div>

<div th:include="fragments/footer :: footer"></div>
</body>
</html>